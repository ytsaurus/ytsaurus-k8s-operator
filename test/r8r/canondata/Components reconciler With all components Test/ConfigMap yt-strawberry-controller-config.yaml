apiVersion: v1
data:
  strawberry-controller.yson: |-
    {
        "location_proxies"=[
            "http-proxies-lb.ytsaurus-components.svc.cluster.local";
        ];
        strawberry={
            root="//sys/strawberry";
            stage=production;
            "robot_username"="robot-strawberry-controller";
        };
        controllers={
            chyt={
                "address_resolver"={
                    "enable_ipv4"=%true;
                    "enable_ipv6"=%false;
                    retries=1000;
                };
                "bus_server"={
                    "encryption_mode"=required;
                    "cert_chain"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_SERVER_CERTIFICATE";
                        "file_name"="/tls/bus_secret/tls.crt";
                    };
                    "private_key"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_SERVER_PRIVATE_KEY";
                        "file_name"="/tls/bus_secret/tls.key";
                    };
                    ca={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CA_BUNDLE";
                        "file_name"="/tls/ca_bundle/ca.crt";
                    };
                    "verification_mode"=full;
                    "peer_alternative_host_name"="test-ytsaurus";
                };
                "secure_vault_files"={
                    "YT_BUS_CA_BUNDLE"="/tls/ca_bundle/ca.crt";
                    "YT_BUS_CLIENT_CERTIFICATE"="/tls/bus_client_secret/tls.crt";
                    "YT_BUS_CLIENT_PRIVATE_KEY"="/tls/bus_client_secret/tls.key";
                    "YT_BUS_SERVER_CERTIFICATE"="/tls/bus_secret/tls.crt";
                    "YT_BUS_SERVER_PRIVATE_KEY"="/tls/bus_secret/tls.key";
                };
            };
            jupyt={
            };
        };
        "http_api_endpoint"=":80";
        "http_location_aliases"={
            "http-proxies-lb.ytsaurus-components.svc.cluster.local"=[
                "test-ytsaurus";
            ];
        };
        "http_controller_mappings"={
            "*"=chyt;
        };
    }
kind: ConfigMap
metadata:
  creationTimestamp: null
  generation: 1
  labels:
    app.kubernetes.io/component: yt-strawberry-controller
    app.kubernetes.io/managed-by: ytsaurus-k8s-operator
    app.kubernetes.io/name: yt-strawberry-controller
    app.kubernetes.io/part-of: yt-test-ytsaurus
    yt_component: test-ytsaurus-yt-strawberry-controller
    ytsaurus.tech/cluster-name: test-ytsaurus
    ytsaurus.tech/config-overrides-version: "1"
  name: yt-strawberry-controller-config
  namespace: ytsaurus-components
  ownerReferences:
  - apiVersion: cluster.ytsaurus.tech/v1
    blockOwnerDeletion: true
    controller: true
    kind: Ytsaurus
    name: test-ytsaurus
    uid: ""
  resourceVersion: "1"
