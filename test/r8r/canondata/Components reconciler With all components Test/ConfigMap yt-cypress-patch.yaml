apiVersion: v1
data:
  cypress-patch.yson: |-
    {
        "//sys/@cluster_connection"=[
            {
                op=replace;
                path="/primary_master/addresses";
                value=[
                    "ms-0.masters.ytsaurus-components.svc.cluster.local:9010";
                ];
            };
            {
                op=replace;
                path="/primary_master/peers";
                value=[
                    {
                        address="ms-0.masters.ytsaurus-components.svc.cluster.local:9010";
                        voting=%true;
                    };
                ];
            };
            {
                op=replace;
                path="/bus_client";
                value={
                    "encryption_mode"=required;
                    "cert_chain"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CLIENT_CERTIFICATE";
                        "file_name"="/tls/bus_client_secret/tls.crt";
                    };
                    "private_key"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CLIENT_PRIVATE_KEY";
                        "file_name"="/tls/bus_client_secret/tls.key";
                    };
                    ca={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CA_BUNDLE";
                        "file_name"="/tls/ca_bundle/ca.crt";
                    };
                    "verification_mode"=full;
                    "peer_alternative_host_name"="test-ytsaurus";
                };
            };
            {
                op=replace;
                path="/yql_agent/stages/production/channel/addresses";
                value=[
                    "yqla-0.yql-agents.ytsaurus-components.svc.cluster.local:9019";
                ];
            };
        ];
        "//sys/@ui_config"=[
            {
                op=replace;
                path="/chyt_controller_base_url";
                value="http://strawberry:80";
            };
        ];
        "<>//sys/clusters"=[
            {
                op=copy;
                path="/test-ytsaurus";
                from="//sys/@cluster_connection";
            };
        ];
    }
  yt-client-cypress-patch.yson: |-
    {
        "<>//sys/clusters"=[
            {
                op=copy;
                path="/test-ytsaurus";
                from="//sys/@cluster_connection";
            };
        ];
    }
  yt-controller-agent-cypress-patch.yson: |-
    {
    }
  yt-data-node-cypress-patch.yson: |-
    {
    }
  yt-discovery-cypress-patch.yson: |-
    {
    }
  yt-exec-node-cypress-patch.yson: |-
    {
    }
  yt-http-proxy-cypress-patch.yson: |-
    {
    }
  yt-image-heater-cypress-patch.yson: |-
    {
    }
  yt-master-cache-cypress-patch.yson: |-
    {
    }
  yt-master-cypress-patch.yson: |-
    {
        "//sys/@cluster_connection"=[
            {
                op=replace;
                path="/primary_master/addresses";
                value=[
                    "ms-0.masters.ytsaurus-components.svc.cluster.local:9010";
                ];
            };
            {
                op=replace;
                path="/primary_master/peers";
                value=[
                    {
                        address="ms-0.masters.ytsaurus-components.svc.cluster.local:9010";
                        voting=%true;
                    };
                ];
            };
            {
                op=replace;
                path="/bus_client";
                value={
                    "encryption_mode"=required;
                    "cert_chain"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CLIENT_CERTIFICATE";
                        "file_name"="/tls/bus_client_secret/tls.crt";
                    };
                    "private_key"={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CLIENT_PRIVATE_KEY";
                        "file_name"="/tls/bus_client_secret/tls.key";
                    };
                    ca={
                        "environment_variable"="YT_SECURE_VAULT_YT_BUS_CA_BUNDLE";
                        "file_name"="/tls/ca_bundle/ca.crt";
                    };
                    "verification_mode"=full;
                    "peer_alternative_host_name"="test-ytsaurus";
                };
            };
        ];
    }
  yt-rpc-proxy-cypress-patch.yson: |-
    {
    }
  yt-scheduler-cypress-patch.yson: |-
    {
    }
  yt-strawberry-controller-cypress-patch.yson: |-
    {
        "//sys/@ui_config"=[
            {
                op=replace;
                path="/chyt_controller_base_url";
                value="http://strawberry:80";
            };
        ];
    }
  yt-yql-agent-cypress-patch.yson: |-
    {
        "//sys/@cluster_connection"=[
            {
                op=replace;
                path="/yql_agent/stages/production/channel/addresses";
                value=[
                    "yqla-0.yql-agents.ytsaurus-components.svc.cluster.local:9019";
                ];
            };
        ];
    }
kind: ConfigMap
metadata:
  annotations:
    extra-pod-annotation: "true"
    kubernetes.io/description: |
      overrides-version: 1
    ytsaurus.tech/config-overrides-version: "1"
    ytsaurus.tech/observed-generation: "1"
  creationTimestamp: null
  generation: 1
  labels:
    app.kubernetes.io/component: yt-client
    app.kubernetes.io/managed-by: ytsaurus-k8s-operator
    app.kubernetes.io/name: yt-client
    app.kubernetes.io/part-of: yt-test-ytsaurus
    yt_component: test-ytsaurus-yt-client
    ytsaurus.tech/cluster-name: test-ytsaurus
  name: yt-cypress-patch
  namespace: ytsaurus-components
  ownerReferences:
  - apiVersion: cluster.ytsaurus.tech/v1
    blockOwnerDeletion: true
    controller: true
    kind: Ytsaurus
    name: test-ytsaurus
    uid: ""
  resourceVersion: "1"
